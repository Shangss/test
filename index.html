<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Flow GIS</title>
    <link rel="stylesheet" href="css/leaflet.css">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/all.css">

    <script src="js/leaflet.js"></script>
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.bundle.js"></script>
   
</head>
<body>
<div id="lmap"></div>
<script>
 var map = L.map('lmap').setView([39, 116], 5);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);
var marker = L.movingMarker([37.809185, -122.477351], {
    destinations: [
        {
            latLng: [37.825766, -122.479218],
            duration: 2000,
        },
        {
            latLng: [37.831420, -122.479936],
            duration: 3000
        },
        {
            latLng: [37.832200, -122.480644],
            duration: 1000
        }
    ],
});
marker.addTo(map);
var icon = new RotatingIcon();
var marker = L.movingMarker(startLatLng, {
    destination: myDestinations,
    icon: icon,
});   
marker.on('start', function() {
    icon.rotate(startingRotation);
});
marker.on('destination', function(destination) {
    icon.rotate(destination.rotation);
});   
</script>
</body>
</html>
